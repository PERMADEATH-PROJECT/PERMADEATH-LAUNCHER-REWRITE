<div class="dashboard-vm-wrapper" *ngIf="tauri.gameOptions">
  <h1 class="vm-title">
    <lucide-icon [img]="Zap"></lucide-icon>
    Java VM Configuration
  </h1>

  <div class="vm-alert vm-alert--yellow">
    <lucide-icon [img]="Info"></lucide-icon>
    <span>
      PERMADEATHSMP requires specific Java settings to handle the mod's complex mechanics.
      Incorrect changes may affect performance.
    </span>
  </div>

  <form class="vm-grid" (ngSubmit)="saveVmOptions()">
    <!-- Memory allocated to the game -->
    <section class="vm-section">
      <div class="vm-section__header">
        <lucide-icon [img]="MemoryStick"></lucide-icon> Memory
      </div>
      <div class="vm-row">
        <label class="vm-label">
          Allocated Memory
          <input type="text" class="vm-input" [(ngModel)]="maxRamStr" name="maxRam" />
        </label>
      </div>
      <div class="vm-row">
        <div class="vm-recommendation">
          <lucide-icon [img]="Info"></lucide-icon>
          <span>
            <strong>Recommendation</strong><br>
            PERMADEATHSMP recommends at least 4 GB due to the modded mobs and transformed dimensions.
          </span>
        </div>
      </div>
    </section>

    <!-- Garbage collector and Java version selection -->
    <section class="vm-section">
      <div class="vm-section__header vm-section__header--green">
        <lucide-icon [img]="Gauge"></lucide-icon> Performance
      </div>
      <div class="vm-row">
        <label class="vm-label">
          Garbage Collector
          <select class="vm-select" [(ngModel)]="tauri.gameOptions.garbage_collector" name="gc">
            <option *ngFor="let gc of gcOptions" [value]="gc">{{ gc }}</option>
          </select>
        </label>
      </div>
      <div class="vm-row">
        <label class="vm-label">
          Java Version
          <select class="vm-select" [(ngModel)]="tauri.gameOptions.custom_java_path" name="javaVersion">
            <option *ngFor="let ver of javaVersions" [value]="ver">{{ ver }}</option>
          </select>
        </label>
      </div>
    </section>

    <!-- Custom JVM arguments -->
    <section class="vm-section vm-section--full">
      <div class="vm-section__header">
        <lucide-icon [img]="Zap"></lucide-icon> JVM Arguments
      </div>
      <div class="vm-row">
        <label class="vm-label">
          Additional arguments
          <textarea class="vm-textarea" rows="2" [(ngModel)]="jvmArgsStr" name="args"></textarea>
        </label>
      </div>
      <div class="vm-row vm-row--buttons">
        <button type="button" class="vm-btn vm-btn--white" (click)="resetDefaults()">Reset to Defaults</button>
      </div>
      <div class="vm-row">
        <div class="vm-critical">
          <lucide-icon [img]="TriangleAlert"></lucide-icon>
          <span>
            <strong>Critical Settings</strong><br>
            Incorrect JVM arguments can cause instability or crashes. Make sure you understand each change.
            Default values are optimized for maximum game performance.
            These values are optimized for multiplayer.
          </span>
        </div>
      </div>
    </section>

    <div class="vm-footer">
      <button type="submit" class="vm-btn vm-btn--orange">Apply Changes</button>
    </div>
  </form>
</div>